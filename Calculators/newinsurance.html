<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.1.css" type="text/css" />
    <link rel="stylesheet" href="formcss.css" type="text/css" />
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="js/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.4.1.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />  
    <script type="text/javascript" src="js/highcharts.js"></script>
    <script type="text/javascript" src="js/exporting.js"></script>
    <script type="text/javascript" src="js/export-data.js"></script>
    <script type="text/javascript" src="js/accessibility.js"></script>
</head>

<body>
    <div class="row">
        <div class="col-md-12" align="center" style="padding: 10px; font-size: 18px;">
            <img src="../img/colorfamily.svg" alt="fb-logo" class="clor-icon"> Family Protection Calculator
        </div>
    </div>
    <div id="printDiv" class="row nomargin calcBg">
        <div class="col-md-6 col-sm-6 col-xs-12 nopadding calcInpDiv">
            <div id="hide" style="display:block;">
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">What is your spouse current Age ?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="CAge" value="35" min="1" max="100" step="1"
                            data-highlight="true" onchange="Calculate()">
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">How much do you earn monthly ?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="Income" value="10000" min="10000" max="1000000"
                            step="10000" data-highlight="true" onchange="Calculate()">
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">What percentage of your income do you spend towards your familyâ€™s
                            monthly
                            expenditure? (excluding EMIs or personal expenses) ?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="incomeper" value="45" min="10" max="100" step="1"
                            data-highlight="true" onchange="Calculate()">
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">By what percentage you think your earnings will increase
                            yearly?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="incomegrow" value="10" min="0" max="100" step="1"
                            data-highlight="true" onchange="Calculate()">
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">What are your current liabilities or financial obligations ?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="liabilities" value="50000" min="0" max="10000000"
                            step="50000" data-highlight="true" onchange="Calculate()">
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">What are your dependents goals requirements ?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="goals" value="500000" min="0" max="10000000"
                            step="100000" data-highlight="true" onchange="Calculate()">
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="col-md-12 col-sm-12 col-xs-12 bar_padding">
                        <label for="slider-fill">If you have some insurance already, what is the sum assured ?</label>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                        <input type="range" name="slider-fill" id="insurance" value="100000" min="0" max="3000000"
                            step="100000" data-highlight="true" onchange="Calculate()">
                    </div>
                </div>


                <!-- <div class="col-md-12 nopadding resp_1080">
                    <div class="col-md-12 col-sm-12 col-xs-12 nopadding">
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-6 resp_600 res_480_cal_hou">
                        <input type='submit' value='Calculate' class='form_button' onclick="Calculate()">
                    </div>
                </div> -->
                <span id='phpfmg_processing' style='display:none;'>
                    <img id='phpfmg_processing_gif' src='admin1500.gif?mod=image&amp;func=processing' border=0
                        alt='Processing...'> <label id='phpfmg_processing_dots'></label>
                </span>
            </div>
        </div>
        <div class="col-md-6 col-sm-6 col-xs-12 nopadding calcChartDiv">
            <div id="benefits" style="display:block;">
                <div class="row nomargin">
                    <div class="col-md-12 result_bar">
                        <div class="col-md-12 col-sm-12 col-xs-12 nopadding resp_480_result">
                            <div class="row nomargin">
                                <div class="col-md-6 col-sm-6 col-xs-6 nopadding">
                                    PV Of Monthly Expenses : 
                                </div>	
                                <div class="col-md-6 col-sm-6 col-xs-6 nopadding resultText">
                                    &#8377; <span id="Expenses_display"></span>
                                </div>	
                            </div>
                            <hr color="#C1C1C1" />
                            <div class="row nomargin">
                                <div class="col-md-6 col-sm-6 col-xs-6 nopadding">
                                    Insurance Requirements : 
                                </div>	
                                <div class="col-md-6 col-sm-6 col-xs-6 nopadding resultText">
                                    &#8377; <span id="Requirements_display"></span>
                                </div>	
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-12 col-xs-12 nopadding pie_resp_600">
                            <div id="piechart" class="piechart"></div>
                        </div>
                    </div>
                    <!-- <div class="clearfix"></div>
                <div class="col-md-12 nopadding">
                    <div class="button result_back_btn res_480_back_btn" onclick="backpage()">Back</div>
                </div> -->
                </div>
                <!-- <div class="row nomargin">
                    <div class="col-md-6"></div>
                    <div class="col-md-6" align="right" style="padding: 0 25px 10px 0">
                        <a onclick="window.location.reload()">Reset Calculator</a>
                    </div>                    
                </div> -->
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var Requirements;
        var Insurance;
        function Calculate() {

            var CAge = document.getElementById("CAge").value;
            var Income = document.getElementById("Income").value;
            var IncomePer = document.getElementById("incomeper").value;
            var Liabilities = document.getElementById("liabilities").value;
            var goals = document.getElementById("goals").value;
            Insurance = document.getElementById("insurance").value;

            var Years;
            Years = (85 - CAge);

            var Expense;
            Expense = Number(Income) * (Number(IncomePer) / 100);
            var Power = Math.pow((1 + (1.87 / 100)), -Years);

            var RHS;
            RHS = [(1 - Number(Power))] / 0.0187;

            var Exp;
            Exp = Math.round(((Expense * 12) * RHS));

            Requirements = Number(Number(Exp) + Number(Liabilities) + Number(goals)) - Number(Insurance);

            document.getElementById('Expenses_display').innerHTML=numberWithCommas(Exp);
            document.getElementById('Requirements_display').innerHTML=numberWithCommas(Requirements); 

            drawChart(Requirements, Insurance);
        }

        google.load("visualization", "1", { packages: ["corechart"] });
        google.setOnLoadCallback(function () {
            drawChart(Requirements, Insurance);
        });
        function drawChart(Requirements, Insurance) {

            /*var data = google.visualization.arrayToDataTable([
                ['Task', 'Hours per Day'],
                ['Shortfall', parseInt(Requirements)],
                ['Existing Cover', parseInt(Insurance)],
            ]);

            var options = {
                title: 'Insurance Required',
                pieHole: 0.4,
                slices: {
                    0: { color: '#2199c7' }, // Color for Shortfall
                    1: { color: '#ee141f' }, // Color for Existing Cover
                },
                pieSliceText: 'percentage',
                tooltip: {
                text: 'value'
                },
                chartArea: {
                    width: '100%',
                    height: '94%'
                },
                legend: {
                    textStyle: {
                        fontSize: 13
                    }
                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart'));
            chart.draw(data, options);*/

            var data = [
                ['Shortfall', parseInt(Requirements)],
                ['Existing Cover', parseInt(Insurance)]
            ];

            Highcharts.chart('piechart', {
                chart: {
                    type: 'pie',
                    backgroundColor: 'rgba(154, 206, 235, 0.01)'
                },
                title: {
                    text: ''
                },
                plotOptions: {
                    pie: {
                        innerSize: '80%', // Make it a donut chart
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                        }
                    },
                    /*series: {
                        borderWidth: 0,
                        colorByPoint: true,
                        type: 'pie',
                        size: '80%',
                        innerSize: '80%',
                        dataLabels: {
                            enabled: true,
                            crop: false,
                            distance: '-10%',
                            style: {
                                fontWeight: 'bold',
                                fontSize: '10px'
                            },
                            connectorWidth: 0
                        }
                    }*/
                },
                colors: ['#ff6984', '#56e8cb'],
                series: [{
                    name: 'Value',
                    colorByPoint: true,
                    data: data
                }],
                // Disable the context menu
                exporting: {
                    enabled: false
                },
                // Disable the Highcharts.com link
                credits: {
                    enabled: false
                }
            });
        }

        function Nextpage() {
            if (document.getElementById('hide2').style.display == 'none') {
                document.getElementById('hide2').style.display = 'block';
                /*document.getElementById('tab3').className='off1';*/
                document.getElementById('tab1').className = 'off1';
                document.getElementById('tab2').className = 'on1';
                document.getElementById('tab4').className = 'off1';

            }

            if (document.getElementById('hide').style.display == 'block') {
                document.getElementById('hide').style.display = 'none';
            }

        }

        function Nextpage2() {
            if (document.getElementById('benefits').style.display == 'none') {
                document.getElementById('benefits').style.display = 'block';
                document.getElementById('tab4').className = 'on1';
                document.getElementById('tab1').className = 'off1';
                document.getElementById('tab2').className = 'off1';
                /*document.getElementById('tab3').className='off1';*/
            }

            if (document.getElementById('hide2').style.display == 'block') {
                document.getElementById('hide2').style.display = 'none';
            }

        }

        function backpage() {
            if (document.getElementById('hide').style.display == 'none') {
                document.getElementById('hide').style.display = 'block';
            }
            if (document.getElementById('benefits').style.display == 'block') {
                document.getElementById('benefits').style.display = 'none';
            }
        }

        function backpage2() {
            if (document.getElementById('hide2').style.display == 'none') {
                document.getElementById('hide2').style.display = 'block';
            }
            if (document.getElementById('benefits').style.display == 'block') {
                document.getElementById('benefits').style.display = 'none';
            }
        }
        function backpage33() {
            if (document.getElementById('benefits').style.display == 'block') {
                document.getElementById('benefits').style.display = 'none';
            }
        }

        document.addEventListener("DOMContentLoaded", Calculate);
    </script>
    <script src="formjs.js" type="text/javascript"></script>
</body>

</html>